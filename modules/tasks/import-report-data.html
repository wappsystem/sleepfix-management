<div id=D__ID>
    <div>
        VmInclude:__COMPONENT__/module/grid.v1.html
    </div>
    <script>
        function F__ID(){
            //-------------------------------------
            VmInclude:__COMPONENT__/module/grid.v1.js
            //-------------------------------------
            var fields="Participant ID|UID,Access_Code,User_ID,Start_Date,Time_Zone";
            m.fields="_Form,"+fields+"";
            m.fields_e=fields+"Set_Sleep_Duration_1,Set_Wake_Time_1,Set_Bed_Time_1,Sleep_Duration_Sleep_1,Sleep_Duration_Fitbit_1,Awake_Sleep_1,Awake_Fitbit_1,Start_Time_Sleep_1,End_Time_Sleep_1,Fall_Asleep_Sleep_1,Sleep_Rating_Sleep_1,SE_Sleep_1,Mood_1,Set_Sleep_Duration_2,Set_Wake_Time_2,Set_Bed_Time_2,Sleep_Duration_Sleep_2,Sleep_Duration_Fitbit_2,Awake_Sleep_2,Awake_Fitbit_2,Start_Time_Sleep_2,End_Time_Sleep_2,Fall_Asleep_Sleep_2,Sleep_Rating_Sleep_2,SE_Sleep_2,Mood_2,Set_Sleep_Duration_3,Set_Wake_Time_3,Set_Bed_Time_3,Sleep_Duration_Sleep_3,Sleep_Duration_Fitbit_3,Awake_Sleep_3,Awake_Fitbit_3,Start_Time_Sleep_3,End_Time_Sleep_3,Fall_Asleep_Sleep_3,Sleep_Rating_Sleep_3,SE_Sleep_3,Mood_3,Set_Sleep_Duration_4,Set_Wake_Time_4,Set_Bed_Time_4,Sleep_Duration_Sleep_4,Sleep_Duration_Fitbit_4,Awake_Sleep_4,Awake_Fitbit_4,Start_Time_Sleep_4,End_Time_Sleep_4,Fall_Asleep_Sleep_4,Sleep_Rating_Sleep_4,SE_Sleep_4,Mood_4,Set_Sleep_Duration_5,Set_Wake_Time_5,Set_Bed_Time_5,Sleep_Duration_Sleep_5,Sleep_Duration_Fitbit_5,Awake_Sleep_5,Awake_Fitbit_5,Start_Time_Sleep_5,End_Time_Sleep_5,Fall_Asleep_Sleep_5,Sleep_Rating_Sleep_5,SE_Sleep_5,Mood_5,Set_Sleep_Duration_6,Set_Wake_Time_6,Set_Bed_Time_6,Sleep_Duration_Sleep_6,Sleep_Duration_Fitbit_6,Awake_Sleep_6,Awake_Fitbit_6,Start_Time_Sleep_6,End_Time_Sleep_6,Fall_Asleep_Sleep_6,Sleep_Rating_Sleep_6,SE_Sleep_6,Mood_6,Set_Sleep_Duration_7,Set_Wake_Time_7,Set_Bed_Time_7,Sleep_Duration_Sleep_7,Sleep_Duration_Fitbit_7,Awake_Sleep_7,Awake_Fitbit_7,Start_Time_Sleep_7,End_Time_Sleep_7,Fall_Asleep_Sleep_7,Sleep_Rating_Sleep_7,SE_Sleep_7,Mood_7,Set_Sleep_Duration_8,Set_Wake_Time_8,Set_Bed_Time_8,Sleep_Duration_Sleep_8,Sleep_Duration_Fitbit_8,Awake_Sleep_8,Awake_Fitbit_8,Start_Time_Sleep_8,End_Time_Sleep_8,Fall_Asleep_Sleep_8,Sleep_Rating_Sleep_8,SE_Sleep_8,Mood_8,Set_Sleep_Duration_9,Set_Wake_Time_9,Set_Bed_Time_9,Sleep_Duration_Sleep_9,Sleep_Duration_Fitbit_9,Awake_Sleep_9,Awake_Fitbit_9,Start_Time_Sleep_9,End_Time_Sleep_9,Fall_Asleep_Sleep_9,Sleep_Rating_Sleep_9,SE_Sleep_9,Mood_9,Set_Sleep_Duration_10,Set_Wake_Time_10,Set_Bed_Time_10,Sleep_Duration_Sleep_10,Sleep_Duration_Fitbit_10,Awake_Sleep_10,Awake_Fitbit_10,Start_Time_Sleep_10,End_Time_Sleep_10,Fall_Asleep_Sleep_10,Sleep_Rating_Sleep_10,SE_Sleep_10,Mood_10,Set_Sleep_Duration_11,Set_Wake_Time_11,Set_Bed_Time_11,Sleep_Duration_Sleep_11,Sleep_Duration_Fitbit_11,Awake_Sleep_11,Awake_Fitbit_11,Start_Time_Sleep_11,End_Time_Sleep_11,Fall_Asleep_Sleep_11,Sleep_Rating_Sleep_11,SE_Sleep_11,Mood_11,Set_Sleep_Duration_12,Set_Wake_Time_12,Set_Bed_Time_12,Sleep_Duration_Sleep_12,Sleep_Duration_Fitbit_12,Awake_Sleep_12,Awake_Fitbit_12,Start_Time_Sleep_12,End_Time_Sleep_12,Fall_Asleep_Sleep_12,Sleep_Rating_Sleep_12,SE_Sleep_12,Mood_12,Set_Sleep_Duration_13,Set_Wake_Time_13,Set_Bed_Time_13,Sleep_Duration_Sleep_13,Sleep_Duration_Fitbit_13,Awake_Sleep_13,Awake_Fitbit_13,Start_Time_Sleep_13,End_Time_Sleep_13,Fall_Asleep_Sleep_13,Sleep_Rating_Sleep_13,SE_Sleep_13,Mood_13,Set_Sleep_Duration_14,Set_Wake_Time_14,Set_Bed_Time_14,Sleep_Duration_Sleep_14,Sleep_Duration_Fitbit_14,Awake_Sleep_14,Awake_Fitbit_14,Start_Time_Sleep_14,End_Time_Sleep_14,Fall_Asleep_Sleep_14,Sleep_Rating_Sleep_14,SE_Sleep_14,Mood_14,Set_Sleep_Duration_15,Set_Wake_Time_15,Set_Bed_Time_15,Sleep_Duration_Sleep_15,Sleep_Duration_Fitbit_15,Awake_Sleep_15,Awake_Fitbit_15,Start_Time_Sleep_15,End_Time_Sleep_15,Fall_Asleep_Sleep_15,Sleep_Rating_Sleep_15,SE_Sleep_15,Mood_15,Set_Sleep_Duration_16,Set_Wake_Time_16,Set_Bed_Time_16,Sleep_Duration_Sleep_16,Sleep_Duration_Fitbit_16,Awake_Sleep_16,Awake_Fitbit_16,Start_Time_Sleep_16,End_Time_Sleep_16,Fall_Asleep_Sleep_16,Sleep_Rating_Sleep_16,SE_Sleep_16,Mood_16,Set_Sleep_Duration_17,Set_Wake_Time_17,Set_Bed_Time_17,Sleep_Duration_Sleep_17,Sleep_Duration_Fitbit_17,Awake_Sleep_17,Awake_Fitbit_17,Start_Time_Sleep_17,End_Time_Sleep_17,Fall_Asleep_Sleep_17,Sleep_Rating_Sleep_17,SE_Sleep_17,Mood_17,Set_Sleep_Duration_18,Set_Wake_Time_18,Set_Bed_Time_18,Sleep_Duration_Sleep_18,Sleep_Duration_Fitbit_18,Awake_Sleep_18,Awake_Fitbit_18,Start_Time_Sleep_18,End_Time_Sleep_18,Fall_Asleep_Sleep_18,Sleep_Rating_Sleep_18,SE_Sleep_18,Mood_18,Set_Sleep_Duration_19,Set_Wake_Time_19,Set_Bed_Time_19,Sleep_Duration_Sleep_19,Sleep_Duration_Fitbit_19,Awake_Sleep_19,Awake_Fitbit_19,Start_Time_Sleep_19,End_Time_Sleep_19,Fall_Asleep_Sleep_19,Sleep_Rating_Sleep_19,SE_Sleep_19,Mood_19,Set_Sleep_Duration_20,Set_Wake_Time_20,Set_Bed_Time_20,Sleep_Duration_Sleep_20,Sleep_Duration_Fitbit_20,Awake_Sleep_20,Awake_Fitbit_20,Start_Time_Sleep_20,End_Time_Sleep_20,Fall_Asleep_Sleep_20,Sleep_Rating_Sleep_20,SE_Sleep_20,Mood_20,Set_Sleep_Duration_21,Set_Wake_Time_21,Set_Bed_Time_21,Sleep_Duration_Sleep_21,Sleep_Duration_Fitbit_21,Awake_Sleep_21,Awake_Fitbit_21,Start_Time_Sleep_21,End_Time_Sleep_21,Fall_Asleep_Sleep_21,Sleep_Rating_Sleep_21,SE_Sleep_21,Mood_21,Set_Sleep_Duration_22,Set_Wake_Time_22,Set_Bed_Time_22,Sleep_Duration_Sleep_22,Sleep_Duration_Fitbit_22,Awake_Sleep_22,Awake_Fitbit_22,Start_Time_Sleep_22,End_Time_Sleep_22,Fall_Asleep_Sleep_22,Sleep_Rating_Sleep_22,SE_Sleep_22,Mood_22,Set_Sleep_Duration_23,Set_Wake_Time_23,Set_Bed_Time_23,Sleep_Duration_Sleep_23,Sleep_Duration_Fitbit_23,Awake_Sleep_23,Awake_Fitbit_23,Start_Time_Sleep_23,End_Time_Sleep_23,Fall_Asleep_Sleep_23,Sleep_Rating_Sleep_23,SE_Sleep_23,Mood_23,Set_Sleep_Duration_24,Set_Wake_Time_24,Set_Bed_Time_24,Sleep_Duration_Sleep_24,Sleep_Duration_Fitbit_24,Awake_Sleep_24,Awake_Fitbit_24,Start_Time_Sleep_24,End_Time_Sleep_24,Fall_Asleep_Sleep_24,Sleep_Rating_Sleep_24,SE_Sleep_24,Mood_24,Set_Sleep_Duration_25,Set_Wake_Time_25,Set_Bed_Time_25,Sleep_Duration_Sleep_25,Sleep_Duration_Fitbit_25,Awake_Sleep_25,Awake_Fitbit_25,Start_Time_Sleep_25,End_Time_Sleep_25,Fall_Asleep_Sleep_25,Sleep_Rating_Sleep_25,SE_Sleep_25,Mood_25,Set_Sleep_Duration_26,Set_Wake_Time_26,Set_Bed_Time_26,Sleep_Duration_Sleep_26,Sleep_Duration_Fitbit_26,Awake_Sleep_26,Awake_Fitbit_26,Start_Time_Sleep_26,End_Time_Sleep_26,Fall_Asleep_Sleep_26,Sleep_Rating_Sleep_26,SE_Sleep_26,Mood_26,Set_Sleep_Duration_27,Set_Wake_Time_27,Set_Bed_Time_27,Sleep_Duration_Sleep_27,Sleep_Duration_Fitbit_27,Awake_Sleep_27,Awake_Fitbit_27,Start_Time_Sleep_27,End_Time_Sleep_27,Fall_Asleep_Sleep_27,Sleep_Rating_Sleep_27,SE_Sleep_27,Mood_27,Set_Sleep_Duration_28,Set_Wake_Time_28,Set_Bed_Time_28,Sleep_Duration_Sleep_28,Sleep_Duration_Fitbit_28,Awake_Sleep_28,Awake_Fitbit_28,Start_Time_Sleep_28,End_Time_Sleep_28,Fall_Asleep_Sleep_28,Sleep_Rating_Sleep_28,SE_Sleep_28,Mood_28,Set_Sleep_Duration_29,Set_Wake_Time_29,Set_Bed_Time_29,Sleep_Duration_Sleep_29,Sleep_Duration_Fitbit_29,Awake_Sleep_29,Awake_Fitbit_29,Start_Time_Sleep_29,End_Time_Sleep_29,Fall_Asleep_Sleep_29,Sleep_Rating_Sleep_29,SE_Sleep_29,Mood_29,Set_Sleep_Duration_30,Set_Wake_Time_30,Set_Bed_Time_30,Sleep_Duration_Sleep_30,Sleep_Duration_Fitbit_30,Awake_Sleep_30,Awake_Fitbit_30,Start_Time_Sleep_30,End_Time_Sleep_30,Fall_Asleep_Sleep_30,Sleep_Rating_Sleep_30,SE_Sleep_30,Mood_30,Set_Sleep_Duration_31,Set_Wake_Time_31,Set_Bed_Time_31,Sleep_Duration_Sleep_31,Sleep_Duration_Fitbit_31,Awake_Sleep_31,Awake_Fitbit_31,Start_Time_Sleep_31,End_Time_Sleep_31,Fall_Asleep_Sleep_31,Sleep_Rating_Sleep_31,SE_Sleep_31,Mood_31,Set_Sleep_Duration_32,Set_Wake_Time_32,Set_Bed_Time_32,Sleep_Duration_Sleep_32,Sleep_Duration_Fitbit_32,Awake_Sleep_32,Awake_Fitbit_32,Start_Time_Sleep_32,End_Time_Sleep_32,Fall_Asleep_Sleep_32,Sleep_Rating_Sleep_32,SE_Sleep_32,Mood_32,Set_Sleep_Duration_33,Set_Wake_Time_33,Set_Bed_Time_33,Sleep_Duration_Sleep_33,Sleep_Duration_Fitbit_33,Awake_Sleep_33,Awake_Fitbit_33,Start_Time_Sleep_33,End_Time_Sleep_33,Fall_Asleep_Sleep_33,Sleep_Rating_Sleep_33,SE_Sleep_33,Mood_33,Set_Sleep_Duration_34,Set_Wake_Time_34,Set_Bed_Time_34,Sleep_Duration_Sleep_34,Sleep_Duration_Fitbit_34,Awake_Sleep_34,Awake_Fitbit_34,Start_Time_Sleep_34,End_Time_Sleep_34,Fall_Asleep_Sleep_34,Sleep_Rating_Sleep_34,SE_Sleep_34,Mood_34,Set_Sleep_Duration_35,Set_Wake_Time_35,Set_Bed_Time_35,Sleep_Duration_Sleep_35,Sleep_Duration_Fitbit_35,Awake_Sleep_35,Awake_Fitbit_35,Start_Time_Sleep_35,End_Time_Sleep_35,Fall_Asleep_Sleep_35,Sleep_Rating_Sleep_35,SE_Sleep_35,Mood_35,Set_Sleep_Duration_36,Set_Wake_Time_36,Set_Bed_Time_36,Sleep_Duration_Sleep_36,Sleep_Duration_Fitbit_36,Awake_Sleep_36,Awake_Fitbit_36,Start_Time_Sleep_36,End_Time_Sleep_36,Fall_Asleep_Sleep_36,Sleep_Rating_Sleep_36,SE_Sleep_36,Mood_36,Set_Sleep_Duration_37,Set_Wake_Time_37,Set_Bed_Time_37,Sleep_Duration_Sleep_37,Sleep_Duration_Fitbit_37,Awake_Sleep_37,Awake_Fitbit_37,Start_Time_Sleep_37,End_Time_Sleep_37,Fall_Asleep_Sleep_37,Sleep_Rating_Sleep_37,SE_Sleep_37,Mood_37,Set_Sleep_Duration_38,Set_Wake_Time_38,Set_Bed_Time_38,Sleep_Duration_Sleep_38,Sleep_Duration_Fitbit_38,Awake_Sleep_38,Awake_Fitbit_38,Start_Time_Sleep_38,End_Time_Sleep_38,Fall_Asleep_Sleep_38,Sleep_Rating_Sleep_38,SE_Sleep_38,Mood_38,Set_Sleep_Duration_39,Set_Wake_Time_39,Set_Bed_Time_39,Sleep_Duration_Sleep_39,Sleep_Duration_Fitbit_39,Awake_Sleep_39,Awake_Fitbit_39,Start_Time_Sleep_39,End_Time_Sleep_39,Fall_Asleep_Sleep_39,Sleep_Rating_Sleep_39,SE_Sleep_39,Mood_39,Set_Sleep_Duration_40,Set_Wake_Time_40,Set_Bed_Time_40,Sleep_Duration_Sleep_40,Sleep_Duration_Fitbit_40,Awake_Sleep_40,Awake_Fitbit_40,Start_Time_Sleep_40,End_Time_Sleep_40,Fall_Asleep_Sleep_40,Sleep_Rating_Sleep_40,SE_Sleep_40,Mood_40,Set_Sleep_Duration_41,Set_Wake_Time_41,Set_Bed_Time_41,Sleep_Duration_Sleep_41,Sleep_Duration_Fitbit_41,Awake_Sleep_41,Awake_Fitbit_41,Start_Time_Sleep_41,End_Time_Sleep_41,Fall_Asleep_Sleep_41,Sleep_Rating_Sleep_41,SE_Sleep_41,Mood_41,Set_Sleep_Duration_42,Set_Wake_Time_42,Set_Bed_Time_42,Sleep_Duration_Sleep_42,Sleep_Duration_Fitbit_42,Awake_Sleep_42,Awake_Fitbit_42,Start_Time_Sleep_42,End_Time_Sleep_42,Fall_Asleep_Sleep_42,Sleep_Rating_Sleep_42,SE_Sleep_42,Mood_42";
            m.form_fields=fields;
            //-------------------------------------
            $('#new__ID').hide();
            $('#save__ID').hide();
            //-------------------------------------
            m.set_req=function(){
                var sql="with tb as (select Access_Code=JSON_VALUE(Information,'$.Access_Code'),Start_Date=JSON_VALUE(Information,'$.Start_Date'),UID,RowNum=row_number() over (order by UID) from [TABLE-"+m.db_pid+"-@S1] )";
                sql+=", acc as (select User_ID=S1,S2 from [TABLE-20011629])"; //user-data
                sql+="select User_ID,Access_Code,Start_Date,UID,RowNum from tb left join acc on Access_Code=S2 where RowNum between @I6 and @I7";
                var sql_n="select count(ID) from [TABLE-"+m.db_pid+"-@S1]";
            	m.req={cmd:'read',qid:m.qid,sql:sql,sql_n:sql_n,s1:'"'+$('#keyword__ID').val()+'"',I:$('#I__ID').text(),page_size:$('#page_size__ID').val()}
            }
            //-------------------------------------
            m.set_req_export=function(i1,i2){
                var sql="with tb as (select Access_Code=JSON_VALUE(Information,'$.Access_Code'),Start_Date=JSON_VALUE(Information,'$.Start_Date'),UID from [TABLE-"+m.db_pid+"-@S1])";
                sql+=", acc as (select User_ID=S1,S2 from [TABLE-20011629])"; //user-data
                sql+="select User_ID,Access_Code,Start_Date,UID from tb left join acc on Access_Code=S2 order by UID";
                m.req={cmd:'read',qid:m.qid,sql:sql,i1:i1,i2:i2};
            }
            //-------------------------------------
            var calculate_day=function(start,current){
                var yearpart = start.split(' ');
                var startdatetime,currentdatetime,sdate;
                if (start.indexOf('-') > -1){
                    sdate= yearpart[0].split('-')
                    startdatetime=new Date(sdate[0], sdate[1] - 1,sdate[2])
                }
                else{
                    sdate= yearpart[0].split('/')
                    startdatetime=new Date(sdate[2], sdate[1] - 1,sdate[0])
                }
                yearpart = current.split(' ');
                if (current.indexOf('-') > -1){
                    sdate= yearpart[0].split('-')
                    currentdatetime=new Date(sdate[0], sdate[1] - 1,sdate[2])
                }
                else{
                    sdate= yearpart[0].split('/')
                    currentdatetime=new Date(sdate[2], sdate[1] - 1,sdate[0])
                }
                day=((currentdatetime-startdatetime)/(1000*60*60*24)).toString();
                return day;
            }
            //-------------------------------------
            var add_time_zone=function(daytime,timezone){
                var ampm = daytime.split(' ');
                var sdate= ampm[0].split('/');
                var stime=ampm[1].split(':')
                if(ampm[2]=='AM'){
                    if(stime[0]=='12') stime[0]='0';
                }
                else if(stime[0]!='12') stime[0]=(parseInt(stime[0])+12).toString();
                var targetTime=new Date(sdate[2], sdate[1] - 1, sdate[0], stime[0], stime[1])
                var correctedDatetime = new Date(targetTime.getTime() + (parseInt(timezone) * 3600 * 1000));
                var dd = correctedDatetime.getDate();
                var mm = correctedDatetime.getMonth()+1; //January is 0!
                var yyyy = correctedDatetime.getFullYear();
                var hh= correctedDatetime.getHours();
                var mn= correctedDatetime.getMinutes();
                if(dd<10) dd='0'+dd;
                if(mm<10) mm='0'+mm;
                if(hh<10) hh='0'+hh;
                if(mn<10) mn='0'+mn;
                return dd+'/'+mm+'/'+yyyy+' '+hh+':'+mn;
            }
            //-----------------------------------------------
            m.generate_report_one_line=function(uid,user_id,start_date,accesscode,){
                jQuery.ajaxSetup({async:false});
                m.records[i].UID=uid;
                m.records[i].User_ID=user_id;
                m.records[i].Start_Date=start_date;
                m.records[i].Access_Code=accesscode;
                //program-user-data
                var sql_up="select V1,DT1,Information from [TABLE-20011627] where S1=@S1 order by DT1";
                m.req={cmd:'read',qid:m.qid,sql:sql_up,s1:user_id}
                $VmAPI.request({data:m.req,callback:function(res_up){
                    if(res_up.records.length!=0){
                        for(var j=0;j<res_up.records.length;j++){
                            m.records[i].Time_Zone=(res_up.records[j].V1).toString();
                            var study_day=calculate_day(start_date,(res_up.records[j].DT1).toString());
                            switch (study_day){
                                case '1': m.records[i].Set_Sleep_Duration_1=res_up.records[j].window;m.records[i].Set_Wake_Time_1=res_up.records[j].waketime;m.records[i].Set_Bed_Time_1=res_up.records[j].bedtime;break;
                                case '2': m.records[i].Set_Sleep_Duration_2=res_up.records[j].window;m.records[i].Set_Wake_Time_2=res_up.records[j].waketime;m.records[i].Set_Bed_Time_2=res_up.records[j].bedtime;break;
                                case '3': m.records[i].Set_Sleep_Duration_3=res_up.records[j].window;m.records[i].Set_Wake_Time_3=res_up.records[j].waketime;m.records[i].Set_Bed_Time_3=res_up.records[j].bedtime;break;
                                case '4': m.records[i].Set_Sleep_Duration_4=res_up.records[j].window;m.records[i].Set_Wake_Time_4=res_up.records[j].waketime;m.records[i].Set_Bed_Time_4=res_up.records[j].bedtime;break;
                                case '5': m.records[i].Set_Sleep_Duration_5=res_up.records[j].window;m.records[i].Set_Wake_Time_5=res_up.records[j].waketime;m.records[i].Set_Bed_Time_5=res_up.records[j].bedtime;break;
                                case '6': m.records[i].Set_Sleep_Duration_6=res_up.records[j].window;m.records[i].Set_Wake_Time_6=res_up.records[j].waketime;m.records[i].Set_Bed_Time_6=res_up.records[j].bedtime;break;
                                case '7': m.records[i].Set_Sleep_Duration_7=res_up.records[j].window;m.records[i].Set_Wake_Time_7=res_up.records[j].waketime;m.records[i].Set_Bed_Time_7=res_up.records[j].bedtime;break;
                                case '8': m.records[i].Set_Sleep_Duration_8=res_up.records[j].window;m.records[i].Set_Wake_Time_8=res_up.records[j].waketime;m.records[i].Set_Bed_Time_8=res_up.records[j].bedtime;break;
                                case '9': m.records[i].Set_Sleep_Duration_9=res_up.records[j].window;m.records[i].Set_Wake_Time_9=res_up.records[j].waketime;m.records[i].Set_Bed_Time_9=res_up.records[j].bedtime;break;
                                case '10': m.records[i].Set_Sleep_Duration_10=res_up.records[j].window;m.records[i].Set_Wake_Time_10=res_up.records[j].waketime;m.records[i].Set_Bed_Time_10=res_up.records[j].bedtime;break;
                                case '11': m.records[i].Set_Sleep_Duration_11=res_up.records[j].window;m.records[i].Set_Wake_Time_11=res_up.records[j].waketime;m.records[i].Set_Bed_Time_11=res_up.records[j].bedtime;break;
                                case '12': m.records[i].Set_Sleep_Duration_12=res_up.records[j].window;m.records[i].Set_Wake_Time_12=res_up.records[j].waketime;m.records[i].Set_Bed_Time_12=res_up.records[j].bedtime;break;
                                case '13': m.records[i].Set_Sleep_Duration_13=res_up.records[j].window;m.records[i].Set_Wake_Time_13=res_up.records[j].waketime;m.records[i].Set_Bed_Time_13=res_up.records[j].bedtime;break;
                                case '14': m.records[i].Set_Sleep_Duration_14=res_up.records[j].window;m.records[i].Set_Wake_Time_14=res_up.records[j].waketime;m.records[i].Set_Bed_Time_14=res_up.records[j].bedtime;break;
                                case '15': m.records[i].Set_Sleep_Duration_15=res_up.records[j].window;m.records[i].Set_Wake_Time_15=res_up.records[j].waketime;m.records[i].Set_Bed_Time_15=res_up.records[j].bedtime;break;
                                case '16': m.records[i].Set_Sleep_Duration_16=res_up.records[j].window;m.records[i].Set_Wake_Time_16=res_up.records[j].waketime;m.records[i].Set_Bed_Time_16=res_up.records[j].bedtime;break;
                                case '17': m.records[i].Set_Sleep_Duration_17=res_up.records[j].window;m.records[i].Set_Wake_Time_17=res_up.records[j].waketime;m.records[i].Set_Bed_Time_17=res_up.records[j].bedtime;break;
                                case '18': m.records[i].Set_Sleep_Duration_18=res_up.records[j].window;m.records[i].Set_Wake_Time_18=res_up.records[j].waketime;m.records[i].Set_Bed_Time_18=res_up.records[j].bedtime;break;
                                case '19': m.records[i].Set_Sleep_Duration_19=res_up.records[j].window;m.records[i].Set_Wake_Time_19=res_up.records[j].waketime;m.records[i].Set_Bed_Time_19=res_up.records[j].bedtime;break;
                                case '20': m.records[i].Set_Sleep_Duration_20=res_up.records[j].window;m.records[i].Set_Wake_Time_20=res_up.records[j].waketime;m.records[i].Set_Bed_Time_20=res_up.records[j].bedtime;break;
                                case '21': m.records[i].Set_Sleep_Duration_21=res_up.records[j].window;m.records[i].Set_Wake_Time_21=res_up.records[j].waketime;m.records[i].Set_Bed_Time_21=res_up.records[j].bedtime;break;
                                case '22': m.records[i].Set_Sleep_Duration_22=res_up.records[j].window;m.records[i].Set_Wake_Time_22=res_up.records[j].waketime;m.records[i].Set_Bed_Time_22=res_up.records[j].bedtime;break;
                                case '23': m.records[i].Set_Sleep_Duration_23=res_up.records[j].window;m.records[i].Set_Wake_Time_23=res_up.records[j].waketime;m.records[i].Set_Bed_Time_23=res_up.records[j].bedtime;break;
                                case '24': m.records[i].Set_Sleep_Duration_24=res_up.records[j].window;m.records[i].Set_Wake_Time_24=res_up.records[j].waketime;m.records[i].Set_Bed_Time_24=res_up.records[j].bedtime;break;
                                case '25': m.records[i].Set_Sleep_Duration_25=res_up.records[j].window;m.records[i].Set_Wake_Time_25=res_up.records[j].waketime;m.records[i].Set_Bed_Time_25=res_up.records[j].bedtime;break;
                                case '26': m.records[i].Set_Sleep_Duration_26=res_up.records[j].window;m.records[i].Set_Wake_Time_26=res_up.records[j].waketime;m.records[i].Set_Bed_Time_26=res_up.records[j].bedtime;break;
                                case '27': m.records[i].Set_Sleep_Duration_27=res_up.records[j].window;m.records[i].Set_Wake_Time_27=res_up.records[j].waketime;m.records[i].Set_Bed_Time_27=res_up.records[j].bedtime;break;
                                case '28': m.records[i].Set_Sleep_Duration_28=res_up.records[j].window;m.records[i].Set_Wake_Time_28=res_up.records[j].waketime;m.records[i].Set_Bed_Time_28=res_up.records[j].bedtime;break;
                                case '29': m.records[i].Set_Sleep_Duration_29=res_up.records[j].window;m.records[i].Set_Wake_Time_29=res_up.records[j].waketime;m.records[i].Set_Bed_Time_29=res_up.records[j].bedtime;break;
                                case '30': m.records[i].Set_Sleep_Duration_30=res_up.records[j].window;m.records[i].Set_Wake_Time_30=res_up.records[j].waketime;m.records[i].Set_Bed_Time_30=res_up.records[j].bedtime;break;
                                case '31': m.records[i].Set_Sleep_Duration_31=res_up.records[j].window;m.records[i].Set_Wake_Time_31=res_up.records[j].waketime;m.records[i].Set_Bed_Time_31=res_up.records[j].bedtime;break;
                                case '32': m.records[i].Set_Sleep_Duration_32=res_up.records[j].window;m.records[i].Set_Wake_Time_32=res_up.records[j].waketime;m.records[i].Set_Bed_Time_32=res_up.records[j].bedtime;break;
                                case '33': m.records[i].Set_Sleep_Duration_33=res_up.records[j].window;m.records[i].Set_Wake_Time_33=res_up.records[j].waketime;m.records[i].Set_Bed_Time_33=res_up.records[j].bedtime;break;
                                case '34': m.records[i].Set_Sleep_Duration_34=res_up.records[j].window;m.records[i].Set_Wake_Time_34=res_up.records[j].waketime;m.records[i].Set_Bed_Time_34=res_up.records[j].bedtime;break;
                                case '35': m.records[i].Set_Sleep_Duration_35=res_up.records[j].window;m.records[i].Set_Wake_Time_35=res_up.records[j].waketime;m.records[i].Set_Bed_Time_35=res_up.records[j].bedtime;break;
                                case '36': m.records[i].Set_Sleep_Duration_36=res_up.records[j].window;m.records[i].Set_Wake_Time_36=res_up.records[j].waketime;m.records[i].Set_Bed_Time_36=res_up.records[j].bedtime;break;
                                case '37': m.records[i].Set_Sleep_Duration_37=res_up.records[j].window;m.records[i].Set_Wake_Time_37=res_up.records[j].waketime;m.records[i].Set_Bed_Time_37=res_up.records[j].bedtime;break;
                                case '38': m.records[i].Set_Sleep_Duration_38=res_up.records[j].window;m.records[i].Set_Wake_Time_38=res_up.records[j].waketime;m.records[i].Set_Bed_Time_38=res_up.records[j].bedtime;break;
                                case '39': m.records[i].Set_Sleep_Duration_39=res_up.records[j].window;m.records[i].Set_Wake_Time_39=res_up.records[j].waketime;m.records[i].Set_Bed_Time_39=res_up.records[j].bedtime;break;
                                case '40': m.records[i].Set_Sleep_Duration_40=res_up.records[j].window;m.records[i].Set_Wake_Time_40=res_up.records[j].waketime;m.records[i].Set_Bed_Time_40=res_up.records[j].bedtime;break;
                                case '41': m.records[i].Set_Sleep_Duration_41=res_up.records[j].window;m.records[i].Set_Wake_Time_41=res_up.records[j].waketime;m.records[i].Set_Bed_Time_41=res_up.records[j].bedtime;break;
                                case '42': m.records[i].Set_Sleep_Duration_42=res_up.records[j].window;m.records[i].Set_Wake_Time_42=res_up.records[j].waketime;m.records[i].Set_Bed_Time_42=res_up.records[j].bedtime;break;                              }
                        }
                    }
                }});
                //fitbit-data
                var sql_fb="select DT3,Sleep_Duration=sum(V1),Awake_minutes=sum(V2) from [TABLE-20011626] where S1=@S1 group by DT3 order by DT3";
                m.req={cmd:'read',qid:m.qid,sql:sql_fb,s1:user_id}
                $VmAPI.request({data:m.req,callback:function(res_fb){
                    if(res_fb.records.length!=0){
                        for(var j=0;j<res_fb.records.length;j++){
                            var study_day=calculate_day(start_date,(res_fb.records[j].DT3).toString());
                            switch (study_day){
                                case '1': m.records[i].Sleep_Duration_Fitbit_1=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_1=res_fb.records[j].Awake_minutes;break;
                                case '2': m.records[i].Sleep_Duration_Fitbit_2=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_2=res_fb.records[j].Awake_minutes;break;
                                case '3': m.records[i].Sleep_Duration_Fitbit_3=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_3=res_fb.records[j].Awake_minutes;break;
                                case '4': m.records[i].Sleep_Duration_Fitbit_4=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_4=res_fb.records[j].Awake_minutes;break;
                                case '5': m.records[i].Sleep_Duration_Fitbit_5=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_5=res_fb.records[j].Awake_minutes;break;
                                case '6': m.records[i].Sleep_Duration_Fitbit_6=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_6=res_fb.records[j].Awake_minutes;break;
                                case '7': m.records[i].Sleep_Duration_Fitbit_7=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_7=res_fb.records[j].Awake_minutes;break;
                                case '8': m.records[i].Sleep_Duration_Fitbit_8=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_8=res_fb.records[j].Awake_minutes;break;
                                case '9': m.records[i].Sleep_Duration_Fitbit_9=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_9=res_fb.records[j].Awake_minutes;break;
                                case '10': m.records[i].Sleep_Duration_Fitbit_10=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_10=res_fb.records[j].Awake_minutes;break;
                                case '11': m.records[i].Sleep_Duration_Fitbit_11=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_11=res_fb.records[j].Awake_minutes;break;
                                case '12': m.records[i].Sleep_Duration_Fitbit_12=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_12=res_fb.records[j].Awake_minutes;break;
                                case '13': m.records[i].Sleep_Duration_Fitbit_13=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_13=res_fb.records[j].Awake_minutes;break;
                                case '14': m.records[i].Sleep_Duration_Fitbit_14=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_14=res_fb.records[j].Awake_minutes;break;
                                case '15': m.records[i].Sleep_Duration_Fitbit_15=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_15=res_fb.records[j].Awake_minutes;break;
                                case '16': m.records[i].Sleep_Duration_Fitbit_16=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_16=res_fb.records[j].Awake_minutes;break;
                                case '17': m.records[i].Sleep_Duration_Fitbit_17=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_17=res_fb.records[j].Awake_minutes;break;
                                case '18': m.records[i].Sleep_Duration_Fitbit_18=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_18=res_fb.records[j].Awake_minutes;break;
                                case '19': m.records[i].Sleep_Duration_Fitbit_19=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_19=res_fb.records[j].Awake_minutes;break;
                                case '20': m.records[i].Sleep_Duration_Fitbit_20=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_20=res_fb.records[j].Awake_minutes;break;
                                case '21': m.records[i].Sleep_Duration_Fitbit_21=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_21=res_fb.records[j].Awake_minutes;break;
                                case '22': m.records[i].Sleep_Duration_Fitbit_22=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_22=res_fb.records[j].Awake_minutes;break;
                                case '23': m.records[i].Sleep_Duration_Fitbit_23=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_23=res_fb.records[j].Awake_minutes;break;
                                case '24': m.records[i].Sleep_Duration_Fitbit_24=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_24=res_fb.records[j].Awake_minutes;break;
                                case '25': m.records[i].Sleep_Duration_Fitbit_25=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_25=res_fb.records[j].Awake_minutes;break;
                                case '26': m.records[i].Sleep_Duration_Fitbit_26=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_26=res_fb.records[j].Awake_minutes;break;
                                case '27': m.records[i].Sleep_Duration_Fitbit_27=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_27=res_fb.records[j].Awake_minutes;break;
                                case '28': m.records[i].Sleep_Duration_Fitbit_28=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_28=res_fb.records[j].Awake_minutes;break;
                                case '29': m.records[i].Sleep_Duration_Fitbit_29=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_29=res_fb.records[j].Awake_minutes;break;
                                case '30': m.records[i].Sleep_Duration_Fitbit_30=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_30=res_fb.records[j].Awake_minutes;break;
                                case '31': m.records[i].Sleep_Duration_Fitbit_31=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_31=res_fb.records[j].Awake_minutes;break;
                                case '32': m.records[i].Sleep_Duration_Fitbit_32=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_32=res_fb.records[j].Awake_minutes;break;
                                case '33': m.records[i].Sleep_Duration_Fitbit_33=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_33=res_fb.records[j].Awake_minutes;break;
                                case '34': m.records[i].Sleep_Duration_Fitbit_34=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_34=res_fb.records[j].Awake_minutes;break;
                                case '35': m.records[i].Sleep_Duration_Fitbit_35=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_35=res_fb.records[j].Awake_minutes;break;
                                case '36': m.records[i].Sleep_Duration_Fitbit_36=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_36=res_fb.records[j].Awake_minutes;break;
                                case '37': m.records[i].Sleep_Duration_Fitbit_37=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_37=res_fb.records[j].Awake_minutes;break;
                                case '38': m.records[i].Sleep_Duration_Fitbit_38=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_38=res_fb.records[j].Awake_minutes;break;
                                case '39': m.records[i].Sleep_Duration_Fitbit_39=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_39=res_fb.records[j].Awake_minutes;break;
                                case '40': m.records[i].Sleep_Duration_Fitbit_40=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_40=res_fb.records[j].Awake_minutes;break;
                                case '41': m.records[i].Sleep_Duration_Fitbit_41=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_41=res_fb.records[j].Awake_minutes;break;
                                case '42': m.records[i].Sleep_Duration_Fitbit_42=res_fb.records[j].Sleep_Duration;m.records[i].Awake_Fitbit_42=res_fb.records[j].Awake_minutes;break;
                            }
                        }
                    }
                }});
                //sleep-data
                var sql_s="select DT3,DT2,DT1,Information from [TABLE-20011625] where S1=@S1 order by DT3";
                m.req={cmd:'read',qid:m.qid,sql:sql_s,s1:user_id}
                $VmAPI.request({data:m.req,callback:function(res_s){
                    if(res_s.records.length!=0){
                        for(var j=0;j<res_s.records.length;j++){
                            var study_day=calculate_day(start_date,(res_s.records[j].DT3).toString());
                            switch (study_day){
                                case '1':m.records[i].Sleep_Duration_Sleep_1=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_1=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_1=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_1=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_1=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_1=res_s.records[j].sleepRating;m.records[i].SE_Sleep_1=res_s.records[j].SE;break;
                                case '2':m.records[i].Sleep_Duration_Sleep_2=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_2=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_2=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);m.records[i].End_Time_Sleep_2=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_2=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_2=res_s.records[j].sleepRating;m.records[i].SE_Sleep_2=res_s.records[j].SE;break;
                                case '3':m.records[i].Sleep_Duration_Sleep_3=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_3=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_3=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_3=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_3=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_3=res_s.records[j].sleepRating;m.records[i].SE_Sleep_3=res_s.records[j].SE;break;
                                case '4':m.records[i].Sleep_Duration_Sleep_4=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_4=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_4=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_4=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_4=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_4=res_s.records[j].sleepRating;m.records[i].SE_Sleep_4=res_s.records[j].SE;break;
                                case '5':m.records[i].Sleep_Duration_Sleep_5=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_5=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_5=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_5=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_5=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_5=res_s.records[j].sleepRating;m.records[i].SE_Sleep_5=res_s.records[j].SE;break;
                                case '6':m.records[i].Sleep_Duration_Sleep_6=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_6=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_6=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_6=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_6=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_6=res_s.records[j].sleepRating;m.records[i].SE_Sleep_6=res_s.records[j].SE;break;
                                case '7':m.records[i].Sleep_Duration_Sleep_7=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_7=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_7=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_7=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_7=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_7=res_s.records[j].sleepRating;m.records[i].SE_Sleep_7=res_s.records[j].SE;break;
                                case '8':m.records[i].Sleep_Duration_Sleep_8=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_8=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_8=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_8=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_8=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_8=res_s.records[j].sleepRating;m.records[i].SE_Sleep_8=res_s.records[j].SE;break;
                                case '9':m.records[i].Sleep_Duration_Sleep_9=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_9=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_9=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_9=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_9=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_9=res_s.records[j].sleepRating;m.records[i].SE_Sleep_9=res_s.records[j].SE;break;
                                case '10':m.records[i].Sleep_Duration_Sleep_10=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_10=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_10=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_10=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_10=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_10=res_s.records[j].sleepRating;m.records[i].SE_Sleep_10=res_s.records[j].SE;break;
                                case '11':m.records[i].Sleep_Duration_Sleep_11=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_11=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_11=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_11=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_11=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_11=res_s.records[j].sleepRating;m.records[i].SE_Sleep_11=res_s.records[j].SE;break;
                                case '12':m.records[i].Sleep_Duration_Sleep_12=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_12=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_12=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_12=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_12=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_12=res_s.records[j].sleepRating;m.records[i].SE_Sleep_12=res_s.records[j].SE;break;
                                case '13':m.records[i].Sleep_Duration_Sleep_13=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_13=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_13=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_13=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_13=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_13=res_s.records[j].sleepRating;m.records[i].SE_Sleep_13=res_s.records[j].SE;break;
                                case '14':m.records[i].Sleep_Duration_Sleep_14=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_14=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_14=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_14=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_14=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_14=res_s.records[j].sleepRating;m.records[i].SE_Sleep_14=res_s.records[j].SE;break;
                                case '15':m.records[i].Sleep_Duration_Sleep_15=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_15=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_15=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_15=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_15=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_15=res_s.records[j].sleepRating;m.records[i].SE_Sleep_15=res_s.records[j].SE;break;
                                case '16':m.records[i].Sleep_Duration_Sleep_16=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_16=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_16=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_16=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_16=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_16=res_s.records[j].sleepRating;m.records[i].SE_Sleep_16=res_s.records[j].SE;break;
                                case '17':m.records[i].Sleep_Duration_Sleep_17=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_17=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_17=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_17=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_17=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_17=res_s.records[j].sleepRating;m.records[i].SE_Sleep_17=res_s.records[j].SE;break;
                                case '18':m.records[i].Sleep_Duration_Sleep_18=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_18=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_18=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_18=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_18=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_18=res_s.records[j].sleepRating;m.records[i].SE_Sleep_18=res_s.records[j].SE;break;
                                case '19':m.records[i].Sleep_Duration_Sleep_19=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_19=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_19=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_19=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_19=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_19=res_s.records[j].sleepRating;m.records[i].SE_Sleep_19=res_s.records[j].SE;break;
                                case '20':m.records[i].Sleep_Duration_Sleep_20=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_20=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_20=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_20=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_20=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_20=res_s.records[j].sleepRating;m.records[i].SE_Sleep_20=res_s.records[j].SE;break;
                                case '21':m.records[i].Sleep_Duration_Sleep_21=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_21=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_21=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_21=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_21=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_21=res_s.records[j].sleepRating;m.records[i].SE_Sleep_21=res_s.records[j].SE;break;
                                case '22':m.records[i].Sleep_Duration_Sleep_22=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_22=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_22=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_22=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_22=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_22=res_s.records[j].sleepRating;m.records[i].SE_Sleep_22=res_s.records[j].SE;break;
                                case '23':m.records[i].Sleep_Duration_Sleep_23=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_23=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_23=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_23=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_23=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_23=res_s.records[j].sleepRating;m.records[i].SE_Sleep_23=res_s.records[j].SE;break;
                                case '24':m.records[i].Sleep_Duration_Sleep_24=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_24=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_24=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_24=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_24=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_24=res_s.records[j].sleepRating;m.records[i].SE_Sleep_24=res_s.records[j].SE;break;
                                case '25':m.records[i].Sleep_Duration_Sleep_25=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_25=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_25=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_25=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_25=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_25=res_s.records[j].sleepRating;m.records[i].SE_Sleep_25=res_s.records[j].SE;break;
                                case '26':m.records[i].Sleep_Duration_Sleep_26=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_26=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_26=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_26=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_26=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_26=res_s.records[j].sleepRating;m.records[i].SE_Sleep_26=res_s.records[j].SE;break;
                                case '27':m.records[i].Sleep_Duration_Sleep_27=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_27=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_27=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_27=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_27=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_27=res_s.records[j].sleepRating;m.records[i].SE_Sleep_27=res_s.records[j].SE;break;
                                case '28':m.records[i].Sleep_Duration_Sleep_28=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_28=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_28=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_28=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_28=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_28=res_s.records[j].sleepRating;m.records[i].SE_Sleep_28=res_s.records[j].SE;break;
                                case '29':m.records[i].Sleep_Duration_Sleep_29=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_29=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_29=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_29=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_29=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_29=res_s.records[j].sleepRating;m.records[i].SE_Sleep_29=res_s.records[j].SE;break;
                                case '30':m.records[i].Sleep_Duration_Sleep_30=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_30=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_30=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_30=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_30=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_30=res_s.records[j].sleepRating;m.records[i].SE_Sleep_30=res_s.records[j].SE;break;
                                case '31':m.records[i].Sleep_Duration_Sleep_31=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_31=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_31=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_31=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_31=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_31=res_s.records[j].sleepRating;m.records[i].SE_Sleep_31=res_s.records[j].SE;break;
                                case '32':m.records[i].Sleep_Duration_Sleep_32=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_32=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_32=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_32=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_32=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_32=res_s.records[j].sleepRating;m.records[i].SE_Sleep_32=res_s.records[j].SE;break;
                                case '33':m.records[i].Sleep_Duration_Sleep_33=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_33=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_33=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_33=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_33=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_33=res_s.records[j].sleepRating;m.records[i].SE_Sleep_33=res_s.records[j].SE;break;
                                case '34':m.records[i].Sleep_Duration_Sleep_34=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_34=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_34=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_34=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_34=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_34=res_s.records[j].sleepRating;m.records[i].SE_Sleep_34=res_s.records[j].SE;break;
                                case '35':m.records[i].Sleep_Duration_Sleep_35=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_35=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_35=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_35=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_35=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_35=res_s.records[j].sleepRating;m.records[i].SE_Sleep_35=res_s.records[j].SE;break;
                                case '36':m.records[i].Sleep_Duration_Sleep_36=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_36=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_36=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_36=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_36=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_36=res_s.records[j].sleepRating;m.records[i].SE_Sleep_36=res_s.records[j].SE;break;
                                case '37':m.records[i].Sleep_Duration_Sleep_37=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_37=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_37=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_37=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_37=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_37=res_s.records[j].sleepRating;m.records[i].SE_Sleep_37=res_s.records[j].SE;break;
                                case '38':m.records[i].Sleep_Duration_Sleep_38=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_38=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_38=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_38=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_38=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_38=res_s.records[j].sleepRating;m.records[i].SE_Sleep_38=res_s.records[j].SE;break;
                                case '39':m.records[i].Sleep_Duration_Sleep_39=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_39=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_39=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_39=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_39=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_39=res_s.records[j].sleepRating;m.records[i].SE_Sleep_39=res_s.records[j].SE;break;
                                case '40':m.records[i].Sleep_Duration_Sleep_40=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_40=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_40=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_40=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_40=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_40=res_s.records[j].sleepRating;m.records[i].SE_Sleep_40=res_s.records[j].SE;break;
                                case '41':m.records[i].Sleep_Duration_Sleep_41=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_41=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_41=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_41=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_41=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_41=res_s.records[j].sleepRating;m.records[i].SE_Sleep_41=res_s.records[j].SE;break;
                                case '42':m.records[i].Sleep_Duration_Sleep_42=res_s.records[j].sleepDuration;m.records[i].Awake_Sleep_42=res_s.records[j].minutesAwake;m.records[i].Start_Time_Sleep_42=add_time_zone(res_s.records[j].DT1,m.records[i].Time_Zone);;m.records[i].End_Time_Sleep_42=add_time_zone(res_s.records[j].DT2,m.records[i].Time_Zone);m.records[i].Fall_Asleep_Sleep_42=res_s.records[j].minutesToFallAsleep;m.records[i].Sleep_Rating_Sleep_42=res_s.records[j].sleepRating;m.records[i].SE_Sleep_42=res_s.records[j].SE;break;
                            }
                        }
                    }
                }});
                //mood-data
                var sql_m="select DT3,Information from [TABLE-20011628] where S1=@S1 order by DT3";
                m.req={cmd:'read',qid:m.qid,sql:sql_m,s1:user_id}
                $VmAPI.request({data:m.req,callback:function(res_m){
                    if(res_m.records.length!=0){
                        for(var j=0;j<res_m.records.length;j++){
                            var study_day=calculate_day(start_date,(res_m.records[j].DT3).toString());
                            switch (study_day){
                                case '1':m.records[i].Mood_1=res_m.records[j].mood_number;break;
                                case '2':m.records[i].Mood_2=res_m.records[j].mood_number;break;
                                case '3':m.records[i].Mood_3=res_m.records[j].mood_number;break;
                                case '4':m.records[i].Mood_4=res_m.records[j].mood_number;break;
                                case '5':m.records[i].Mood_5=res_m.records[j].mood_number;break;
                                case '6':m.records[i].Mood_6=res_m.records[j].mood_number;break;
                                case '7':m.records[i].Mood_7=res_m.records[j].mood_number;break;
                                case '8':m.records[i].Mood_8=res_m.records[j].mood_number;break;
                                case '9':m.records[i].Mood_9=res_m.records[j].mood_number;break;
                                case '10':m.records[i].Mood_10=res_m.records[j].mood_number;break;
                                case '11':m.records[i].Mood_11=res_m.records[j].mood_number;break;
                                case '12':m.records[i].Mood_12=res_m.records[j].mood_number;break;
                                case '13':m.records[i].Mood_13=res_m.records[j].mood_number;break;
                                case '14':m.records[i].Mood_14=res_m.records[j].mood_number;break;
                                case '15':m.records[i].Mood_15=res_m.records[j].mood_number;break;
                                case '16':m.records[i].Mood_16=res_m.records[j].mood_number;break;
                                case '17':m.records[i].Mood_17=res_m.records[j].mood_number;break;
                                case '18':m.records[i].Mood_18=res_m.records[j].mood_number;break;
                                case '19':m.records[i].Mood_19=res_m.records[j].mood_number;break;
                                case '20':m.records[i].Mood_20=res_m.records[j].mood_number;break;
                                case '21':m.records[i].Mood_21=res_m.records[j].mood_number;break;
                                case '22':m.records[i].Mood_22=res_m.records[j].mood_number;break;
                                case '23':m.records[i].Mood_23=res_m.records[j].mood_number;break;
                                case '24':m.records[i].Mood_24=res_m.records[j].mood_number;break;
                                case '25':m.records[i].Mood_25=res_m.records[j].mood_number;break;
                                case '26':m.records[i].Mood_26=res_m.records[j].mood_number;break;
                                case '27':m.records[i].Mood_27=res_m.records[j].mood_number;break;
                                case '28':m.records[i].Mood_28=res_m.records[j].mood_number;break;
                                case '29':m.records[i].Mood_29=res_m.records[j].mood_number;break;
                                case '30':m.records[i].Mood_30=res_m.records[j].mood_number;break;
                                case '31':m.records[i].Mood_31=res_m.records[j].mood_number;break;
                                case '32':m.records[i].Mood_32=res_m.records[j].mood_number;break;
                                case '33':m.records[i].Mood_33=res_m.records[j].mood_number;break;
                                case '34':m.records[i].Mood_34=res_m.records[j].mood_number;break;
                                case '35':m.records[i].Mood_35=res_m.records[j].mood_number;break;
                                case '36':m.records[i].Mood_36=res_m.records[j].mood_number;break;
                                case '37':m.records[i].Mood_37=res_m.records[j].mood_number;break;
                                case '38':m.records[i].Mood_38=res_m.records[j].mood_number;break;
                                case '39':m.records[i].Mood_39=res_m.records[j].mood_number;break;
                                case '40':m.records[i].Mood_40=res_m.records[j].mood_number;break;
                                case '41':m.records[i].Mood_41=res_m.records[j].mood_number;break;
                                case '42':m.records[i].Mood_42=res_m.records[j].mood_number;break;                            }
                        }
                    }
                }});

                jQuery.ajaxSetup({async:true});
                return m.records[i];
            }
            //-----------------------------------------------
            m.export_records=function(){
                var i=1;
                m.records[i].UID='80';
                m.records[i].Access_Code='Accesscode-2';
                m.records[i].User_ID='5bd2bfb2ba4efd0a39150845';
                m.records[i].Start_Date='2018-12-13';
                m.records[i]=m.generate_report_one_line(m.records[i].UID,m.records[i].User_ID,m.records[i].Start_Date,m.records[i].Access_Code)
                alert(JSON.stringify(m.records[i]))
                //var fn='wideoutput.csv'
                //$vm.download_csv({name:fn,data: m.records,fields:m.fields_e});
/*
                var g_I,gLoop,busy,results,gDialog_module_id;
            	//g_I page number, 0 is first page
                var start=$('#start__ID').val();  if(start==="") start=1;
                var page_size=parseInt($('#page_size__ID').val());
                var num=$('#num__ID').val(); num=parseInt(num);

                if($('#start__ID').val()==undefined || $('#start__ID').val()=="") start=1;
                if($('#page_size__ID').val()==undefined) page_size=30;
                if($('#num__ID').val()==undefined || $('#num__ID').val()=="") num=1;
                var one_loop=function(){
            		//page by page (500ms) to get data and save to results
                    if(busy==1) return;
                    busy=1;

                    console.log(g_I)

                    var i1=1+(start-1+g_I)*page_size,i2=i1+page_size-1;
                    m.set_req_export(i1.toString(),i2.toString());
                    $VmAPI.request({data:m.req,callback:function(res){
                        busy=0;
                        $('#export_num'+gDialog_module_id).text("Page "+(g_I+1).toString());
                        if(res.records.length!=0){
                            for(var i=0;i<res.records.length;i++){
                                results.push(res.records[i]);
                            }
                        }
                        else{
                            end_export();
                            return;
                        }
                        g_I++;
                        if(g_I>=num){
                            end_export();
                            return;
                        }
                    }})
                }
                //-------------------------------------
                var start_export=function(){
                    g_I=0;busy=0;results=[];
                    gDialog_module_id=$vm.get_module_id({name:'_system_export_dialog_module'})
                    $('#export_num'+gDialog_module_id).text("Page 0");
                    $vm.open_dialog({name:'_system_export_dialog_module'});
            		gLoop=setInterval(one_loop, 500);
            		$vm._export_g_loop=gLoop;
                }
                //-------------------------------------
                var end_export=function(){
                    clearInterval(gLoop);
                    $vm.close_dialog({name:'_system_export_dialog_module'});
                    if(m.fields_e===undefined) m.fields_e=m.fields.replace('_Form,','').replace(',_Delete','');
            		m.records=results;
            		if(m.data_process!==undefined){ m.data_process(); }
                    var fn=m.export_filename;
                    if(fn==undefined) fn="F"+m.db_pid+".csv";
                    $vm.download_csv({name:fn,data: m.records,fields:m.fields_e});
                }
                //-------------------------------------
                start_export();
*/            }
            //-------------------------------------
            m.data_process_after_render=function(){
            }
            //-------------------------------------
        }
    </script>
    <style>
        VmInclude:__COMPONENT__/module/grid.v1.css
    </style>
</div>
